<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Org Chart</title>

  <script src="https://www.gstatic.com/charts/loader.js"></script>

  <style>
    /* Page */
    body{
      margin:0;
      padding:24px;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      background:#f6f8fb;
      color:#111827;
    }

    /* Make chart responsive */
    #chart_div{
      width:100%;
      background:transparent;
    }

    /* ===== Node Card ===== */
    .org-card{
      display:flex;
      align-items:center;
    }

    /* Photo */
    .org-photo img{
      width:65px;
      height:75px;
      /*object-fit:cover;*/
      display:block;
      background:#ffffff;

    }


    /* Text */
    .org-meta{
      gap:15px;
    }
    .google-visualization-orgchart-node .org-meta{
      display:flex;
      flex-direction:column;
      margin-left:12px;
    }
    .google-visualization-orgchart-node{
        border: 2px solid #000000 !important;
        border-radius: 0px !important;
        box-shadow: none !important;
        padding: 6px !important;
        background: rgb(197, 228, 197) !important;
    }


    .google-visualization-orgchart-lineleft{
        border-left: 2px solid #000000 !important;
    }
    .google-visualization-orgchart-lineright{
        border-right: 2px solid #000000 !important;
    }
    .google-visualization-orgchart-linetop{
        border-top: 2px solid #000000 !important;
    }
    .google-visualization-orgchart-linebottom{
        border-bottom: 2px solid #000000 !important;
    }

    .org-name{
      font-size:12px;
      font-weight: bolder ;
      color: #000000;
    }
    .org-title{
      font-size:11px;
      color: #333333;
    }
    /* Badges */
    .org-badges{
      margin-top:6px;
      gap:4px;
      flex-wrap:wrap;
    }
    .badge{
      background:#e0e7ff;
      color:#3730a3;
      font-size:10px;
      padding:2px 6px;
      border-radius:4px;
      white-space:nowrap;
    }
  </style>

  <script>
    google.charts.load('current', { packages: ['orgchart'] });
    google.charts.setOnLoadCallback(drawChart);

    // helper: build one node HTML (photo left, text right)
    function nodeHtml({ name, title, photoUrl, badges = [] }) {
      const badgeHtml = badges.length
        ? `<div class="org-badges">${badges.map(b => `<span class="badge">${escapeHtml(b)}</span>`).join('')}</div>`
        : '';

      // if no image, use initials fallback (optional)
      const img = photoUrl
        ? `<img alt="${escapeHtml(name)}" src="${photoUrl}" />`
        : `<img alt="${escapeHtml(name)}" src="https://via.placeholder.com/200x200.png?text=${encodeURIComponent(initials(name))}" />`;

      return `
        <div class="org-card">
          <div class="org-photo"><a href="https://www.google.com/" target="_blank">${img}</a></div>
          <div class="org-meta">
            <div class="org-name">${escapeHtml(name)}</div>
            <div class="org-title">${escapeHtml(title || '')}</div>
            ${badgeHtml}
          </div>
        </div>
      `;
    }

    function initials(name){
      return name.split(/\s+/).slice(0,2).map(s => s[0]?.toUpperCase() || '').join('');
    }

    function escapeHtml(str){
      return String(str ?? '')
        .replace(/&/g, '&amp;')
        .replace(/</g, '&lt;')
        .replace(/>/g, '&gt;')
        .replace(/"/g, '&quot;')
        .replace(/'/g, '&#039;');
    }

    function drawChart() {
      const data = new google.visualization.DataTable();
      data.addColumn('string', 'Name');
      data.addColumn('string', 'Manager');
      data.addColumn('string', 'ToolTip');

      data.addRows([
        [
          { v: 'Mike', f: nodeHtml({
              name: 'Mike',
              title: 'President',
              photoUrl: 'https://i.pravatar.cc/160?img=12',
              badges: ['Executive']
            })
          },
          '',
          'The President'
        ],
        [
          { v: 'Jim', f: nodeHtml({
              name: 'Jim',
              title: 'Vice President',
              photoUrl: 'https://i.pravatar.cc/160?img=5',
              badges: ['Leadership']
            })
          },
          'Mike',
          'VP'
        ],
        [
          { v: 'Alice', f: nodeHtml({
              name: 'Alice',
              title: 'Head of Operations',
              photoUrl: 'https://i.pravatar.cc/160?img=32',
              badges: ['Ops']
            })
          },
          'Mike',
          'Operations'
        ],
        [
          { v: 'Bob', f: nodeHtml({
              name: 'Bob',
              title: 'Engineering Manager',
              photoUrl: 'https://i.pravatar.cc/160?img=18',
              badges: ['Engineering']
            })
          },
          'Jim',
          'Bob Sponge' 
        ],
        [
          { v: 'Carol', f: nodeHtml({
              name: 'Carol',
              title: 'Software Engineer',
              photoUrl: 'https://i.pravatar.cc/160?img=47',
              badges: ['IC']
            })
          },
          'Bob',
          ''
        ]
      ]);

      const chart = new google.visualization.OrgChart(document.getElementById('chart_div'));
      chart.draw(data, {
        allowHtml: true,
        size: 'medium' // 'small' | 'medium' | 'large'
      });
    }

    // Redraw on resize to keep layout crisp
    let resizeTimer;
    window.addEventListener('resize', () => {
      clearTimeout(resizeTimer);
      resizeTimer = setTimeout(drawChart, 150);
    });
  </script>
</head>

<body>
  <div id="chart_div" aria-label="Organization chart"></div>
</body>
</html>
